{% extends 'allianceauth/base.html' %}

{% load i18n %}
{% load static %}

{% block page_title %}{% trans 'Fleet Activity' %}{% endblock %}

{% block content %}
        <div class="col-lg-12">
            <br>
            {% include "afat/partials/menu.html" %}
            {% include "afat/partials/fleet_edit/message.html" %}

            <h2>{% trans "Edit FAT Link" %}</h2>

            {% include "afat/partials/fleet_edit/fatlink_name_form.html" %}

            <p>&nbsp;</p>

            {% include "afat/partials/fleet_edit/tabs_navigation.html" %}

            <div class="tab-content">
                {% include "afat/partials/fleet_edit/tabs/fats.html" %}
                {% include "afat/partials/fleet_edit/tabs/flatlist.html" %}
                {% include "afat/partials/fleet_edit/tabs/manualfat.html" %}
            </div>
        </div>
    </div>

    {% include "afat/modals/delete-fat.html" %}
{% endblock %}

{% block extra_javascript %}
    {% include 'bundles/datatables-js.html' %}

    <script type="application/javascript" src="{% static 'afat/javascript/clipboard-js/clipboard.min.js' %}"></script>
{% endblock %}

{% block extra_css %}
    {% include 'bundles/datatables-css.html' %}
{% endblock %}

{% block extra_script %}
    $(document).ready(function(){
        $('#fat-chars').DataTable();

        var clipboard = new ClipboardJS('.copy-btn');

        clipboard.on('success', function(e) {
            $('.copy-btn').tooltip('show');
        });

        $('#deleteModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget) // Button that triggered the modal
            var url = button.data('url') // Extract info from data-* attributes
            var name = button.data('name');

            var modal = $(this)
            modal.find('#fat-link').attr("href", url)
            modal.find('.modal-body').text('{% trans "Are you sure you want to delete" %} ' + name + '?');
        });
    });
{% endblock %}
